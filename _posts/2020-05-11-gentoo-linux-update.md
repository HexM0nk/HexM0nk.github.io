---
layout: post
title:  "Обновление пакетов в Gentoo Linux"
author: HexQuant
tag: Gentoo Linux
---

## Обновление спустя долгое время
Для начала лучше сконцентрироваться на обнавлении системного сета:

```console
emerge -avu @system
```

Затем можно приступать к обновлению мира:

```console
emerge -avquDNp @world
```

Если конфликтов слишком много, то стоит убрать флаги -D(считывать полное дерево зависимостей пакетов вместо проверки прямых зависимостей) и -N(включить в список на установку уже установленные пакеты, в которых с момента предыдущей компиляции изменились USE-флаги).

## Проблемы при обновлении пакетов
### Конфликт слотов
Проверить где используется наш пакет, например ***dev-lang/ghc***:

```console
qdepends -Q '%{CAT}/%{PN}:%{SLOT}' ^dev-lang/ghc
```

Принудительно провести пересборку всех кто зависит от ***dev-lang/ghc***:

```console
emerge --ignore-default-opts -va1 --keep-going $( qdepends -CQqqF '%{CAT}/%{PN}:%{SLOT}' '^dev-lang/ghc' )
```

### Блокировка
Удалить всех кто блокирует пакет ***dev-lang/ghc***
```console
emerge -C $(qlist -IC dev-lang/ghc)
```
